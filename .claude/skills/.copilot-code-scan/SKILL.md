---
name: copilot-code-scan
description: Hunt for bugs, code quality issues, and improvement opportunities in the codebase
---

# コードベースの問題発見

既存製品の不具合を探す（機能追加なし）。コード品質の点検、型安全性、テストカバレッジ、セキュリティ、パフォーマンスの問題を発見する。

## 方針

- 既存製品の不具合を探す（機能追加なし）
- 軽微な修正をその場で直してコミットする
- 大きな問題は報告する

## 点検範囲

### コード品質

- 未使用のコード（import、変数、関数）
- エラーハンドリングの不足
- セキュリティ上の懸念（XSS、インジェクションなど）
- パフォーマンスの問題
- 型安全性の問題
- テストカバレッジの不足

### UI/UX

- 主要な画面の操作性
- レスポンシブデザインの確認
- エラー時のユーザー体験
- アクセシビリティ

## プロセス

### 仕様書の構造理解

`docs` スキルで仕様書の構造とルールを理解する。

### コードベースの調査

`superpowers:systematic-debugging` スキルを使用して、以下を調査する:

- 型エラー、lint エラー
- 未使用のコード
- セキュリティ上の懸念
- テストカバレッジの不足
- パフォーマンスの問題
- 仕様書との整合性（コードと仕様の乖離、実装済みだが仕様書に反映されていない機能など）

### 問題の分類

発見した問題を以下の基準で分類する。

**自律的に対応（その場で修正してコミット）:**

- typo、フォーマット
- 明らかなバグ（影響範囲が小さい）
- 未使用のコード削除
- 自動修正可能な lint エラー

**報告:**

上記以外の全ての問題を報告する。

報告対象:
- 型エラー、lint エラーの修正（自動修正できなかった場合）
- テストカバレッジの向上
- パッケージの更新
- リファクタリング
- UI の軽微な表示崩れ
- 機能追加が必要な問題
- ビジネス判断が必要な変更
- 重大な不具合（データ損失、セキュリティ、課金など）
- 仕様変更が必要な問題
- 実装方針に複数の選択肢がある問題

### 問題への対応

発見した問題を分類に応じて対応する。

#### 自律的に対応（その場で修正してコミット）

軽微な問題（typo、フォーマット、lint エラーなど）は即座に修正してコミットする。

#### 報告

上記以外の全ての問題を報告する。

報告に含める内容:

- 問題の内容（何が問題か）
- 影響範囲（どの機能・ユーザーに影響するか）
- 推奨する対応（どう対処すべきか）
- 推奨優先度（高/中/低）
- 人間承認の必要性（必要/不要とその理由）

### 成果物の提出

発見した問題を成果物として提出して終了する。実装・修正は行わない（typo/フォーマット等の自律的な修正を除く）。
